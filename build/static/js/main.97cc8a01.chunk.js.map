{"version":3,"sources":["partials/Chat.js","partials/Controls.js","World.js","LandingPage.js","Login.js","App.js","reportWebVitals.js","index.js"],"names":["Chat","ws","chats","useState","chatMessage","setChatMessage","sendChat","useCallback","emit","message","className","filter","a","username","map","chat","src","image","alt","type","placeholder","style","margin","value","onChange","event","currentTarget","onKeyPress","code","Control","videoRef","updateWS","playing","setPlaying","useEffect","on","data","console","log","current","currentTime","paused","pause","play","setTimeout","callback","delay","savedCallback","useRef","id","setInterval","clearInterval","useInterval","isScrubbing","setScrubber","scrubber","setIsScrubbing","onClick","pv","toString","padStart","onMouseDown","onMouseUp","min","max","duration","evt","prompt","rad","x","Math","PI","World","sid","state","maxSpeed","roomYRotation","_setRoomYRotation","dr","setDr","setValue","window","innerWidth","offset","setOffset","posX","_setPosX","posZ","_setPosZ","cameraCoordinates","avatars","setAvatars","videoSrc","setChats","king","dy","innerHeight","setPosX","obj","setPosZ","roomYRotationRef","setRoomYRotation","nv","keysPressed","keyFuncs","cos","sin","update","forEach","document","addEventListener","ev","name","Array","from","Set","keySet","delete","removeKey","body","requestPointerLock","mozRequestPointerLock","pointerLockElement","mozPointerLockElement","movementX","transform","face","orientation","dz","dx","styles","backgroundColor","inside","ref","width","height","autoPlay","RenderAvatars","JSON","stringify","display","color","position","top","N","E","W","S","T","B","extraStyles","includes","fontSize","Object","keys","av","y","z","size","avatarStyles","avatar","animate","func","interval","to","step","sleep","n","Promise","r","resolve","val","LandingPage","setState","loading","animating","setAnimating","opacity","disabled","then","page","newRoom","generator","AvatarGenerator","Login","roomID","random","setUsername","avatarImageSRC","generateRandomAvatar","trim","required","length","App","connectedWS","setConnectedWS","setSID","location","pathname","substring","setRoomID","fetch","json","io","endpoint","history","pushState","href","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.97cc8a01.chunk.js","sourcesContent":["import React, {useState, useEffect, useRef, useCallback} from \"react\";\nimport \"./chat.sass\";\n\nexport default function Chat({ws, chats}) {\n    const [chatMessage, setChatMessage] = useState(null);\n    const sendChat = useCallback(() => {\n        ws.emit('chat', {message: chatMessage})\n        setChatMessage('');\n    }, [ws, chatMessage])\n    return <div className=\"chatContainer\">\n        <div className=\"chatbox\">\n            {chats.filter(a => a.username !== \"undefined left\").map(chat => <div className=\"chatMessage\">\n                <img\n                    src={'img/' + chat.image + '1.png'}\n                    alt=\"avatar\"/>\n                <span className=\"author\">{chat.username}</span>\n                <p>{chat.message}</p>\n            </div>)}\n        </div>\n        <input type=\"text\" placeholder={\"chat :D\"} style={{margin: 0}} value={chatMessage}\n               onChange={(event) => setChatMessage(event.currentTarget.value)}\n               onKeyPress={(event) => event.code === \"Enter\" ? sendChat() : ''}\n        />\n    </div>\n}","import React, {useEffect, useRef, useState} from \"react\";\nimport \"./control.sass\";\n\nexport default function Control({ws, videoRef, updateWS}) {\n\n    const [playing, setPlaying] = useState(false)\n\n    useEffect(() => {\n        ws.on('status', (data) => {\n            console.log(data);\n            if (videoRef.current) videoRef.current.src = data.src;\n            if (videoRef.current) videoRef.current.currentTime = data.currentTime;\n            if (data.paused) videoRef.current.pause();\n            else videoRef.current.play();\n        });\n    }, [updateWS, videoRef, ws])\n\n    useEffect(() => {\n        setTimeout( () => {\n            console.log(videoRef.current.src);\n            if(!videoRef.current.src) {\n                videoRef.current.src = 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4';\n                videoRef.current.play()\n                setPlaying(true);\n            }\n            updateWS();\n        }, 5000)\n    }, [updateWS, videoRef])\n\n    function useInterval(callback, delay) {\n        const savedCallback = useRef();\n\n        // Remember the latest callback.\n        useEffect(() => {\n            savedCallback.current = callback;\n        }, [callback]);\n\n        // Set up the interval.\n        useEffect(() => {\n            function tick() {\n                savedCallback.current();\n            }\n\n            if (delay !== null) {\n                let id = setInterval(tick, delay);\n                return () => clearInterval(id);\n            }\n        }, [delay]);\n    }\n\n    useInterval(() => {\n        if (!isScrubbing) setScrubber(videoRef.current?.currentTime || 0)\n    }, 1000)\n\n    let [scrubber, setScrubber] = useState(videoRef.current?.currentTime || 0);\n    let [isScrubbing, setIsScrubbing] = useState(false);\n    if (!videoRef.current) return <div className=\"controlContainer\">\n        <div className=\"controlbox\">\n            <p>Loading...</p>\n        </div>\n    </div>\n\n\n    return <div className=\"controlContainer\">\n        <div className=\"controlbox\">\n            <button className=\"icon\" onClick={() => {\n                if (playing) videoRef.current.pause();\n                else videoRef.current.play();\n                setPlaying(pv => !pv);\n                updateWS();\n            }}>\n                <span className=\"material-icons-two-tone\">\n                    {playing ? 'pause' : 'play_arrow'}\n                </span>\n            </button>\n\n            <span\n                className={'scrubber'}>{videoRef.current.currentTime / 60 >> 0}:{((videoRef.current.currentTime >> 0) % 60).toString().padStart(2, '0')}</span>\n            <input\n                onMouseDown={() => setIsScrubbing(true)}\n                onMouseUp={() => {\n                    videoRef.current.currentTime = scrubber;\n                    updateWS();\n                    setIsScrubbing(false)\n                }}\n                type=\"range\" value={scrubber} min={0} max={videoRef.current?.duration || 0}\n                onChange={evt => {\n                    setScrubber(evt.currentTarget.value);\n                }}\n            />\n            <button className=\"icon\" onClick={() => {\n                videoRef.current.src = prompt('New video URL');\n                videoRef.current.currentTime = 0;\n                updateWS();\n            }}>\n                <span className=\"material-icons-two-tone\">\n                    playlist_add\n                </span>\n            </button>\n        </div>\n    </div>\n}","import React, {useState, useEffect, useRef, useCallback} from \"react\";\nimport {io} from \"socket.io-client\";\n\nimport Chat from './partials/Chat';\nimport Controls from './partials/Controls';\n\n\nconst rad = (x) => x * Math.PI / 180;\n\nexport default function World({ws, sid, state}) {\n    const acceleration = 0.5;\n    const maxSpeed = 10;\n    const turnSpeed = .1;\n\n    const [roomYRotation, _setRoomYRotation] = useState(0);\n    const [dr, setDr] = useState(0);\n\n    const [value, setValue] = useState(0); // integer state; used to force render\n\n    // start with the center of the box in the center of the screen\n    const [offset, setOffset] = useState(-(window.innerWidth) / 2);\n\n    const [posX, _setPosX] = useState(0);\n    const [posZ, _setPosZ] = useState(offset + 1196 / 2);\n    const cameraCoordinates = useRef({posX, posZ});\n\n    const [avatars, setAvatars] = useState({});\n\n    const videoRef = useRef(null);\n    const [videoSrc, setVideoSrc] = useState(null);\n\n    const [chats, setChats] = useState([]);\n\n    const [king, setKing] = useState(false);\n\n    // set interval but react hook\n    // https://overreacted.io/making-setinterval-declarative-with-react-hooks/\n    function useInterval(callback, delay) {\n        const savedCallback = useRef();\n\n        // Remember the latest callback.\n        useEffect(() => {\n            savedCallback.current = callback;\n        }, [callback]);\n\n        // Set up the interval.\n        useEffect(() => {\n            function tick() {\n                savedCallback.current();\n            }\n\n            if (delay !== null) {\n                let id = setInterval(tick, delay);\n                return () => clearInterval(id);\n            }\n        }, [delay]);\n    }\n\n    // == INCOMING WEBSOCKET == beep boop beep boop\n    useEffect(() => {\n        console.log(ws);\n        ws.on('avatars', data => {\n            setAvatars(data)\n            setValue(pv => (pv + 1) % 100);\n        });\n        if (!state.data.king) ws.on('status', (data) => {\n            console.log(data);\n            videoRef.current.src = data.src;\n            videoRef.current.currentTime = data.currentTime;\n            if (data.paused) videoRef.current.pause();\n            else videoRef.current.play();\n        });\n        ws.on('chat', (chat) => {\n            setChats(pv => [...pv, chat])\n            console.log(chat);\n        })\n\n    }, [ws])\n\n    const updateWS = useCallback(() => {\n        ws.emit('update', {\n            src: videoRef.current.src,\n            currentTime: videoRef.current.currentTime,\n            paused: videoRef.current.paused\n        })\n    }, [ws, videoRef])\n\n\n    // emit current location every 100ms\n    useInterval(() => {\n        ws.emit('location', {posZ: posZ - (offset + 1196 / 2), posX});\n    }, 100, [posX, posZ])\n\n\n    // helper functions: location (dxyz) math\n    const dy = (window.innerHeight - 596) / 2;\n    const setMaxMinPos = v => v; // Math.max(-500, Math.min(v, 500)); // use this if you want them boxed in a 500x500px\n    const setPosX = obj => {\n        if (typeof obj === \"function\") _setPosX(pv => setMaxMinPos(obj(pv)));\n        else _setPosX(setMaxMinPos(obj));\n        cameraCoordinates.current = {...cameraCoordinates.current, posX}\n    }\n    const setPosZ = obj => {\n        if (typeof obj === \"function\") _setPosZ(pv => setMaxMinPos(obj(pv)));\n        else _setPosZ(setMaxMinPos(obj));\n        cameraCoordinates.current = {...cameraCoordinates.current, posZ}\n    }\n    const roomYRotationRef = useRef(0);\n    const setRoomYRotation = (obj) => {\n        if (typeof obj === \"function\") {\n            _setRoomYRotation(pv => {\n                let nv = obj(pv);\n                roomYRotationRef.current = nv;\n                return nv % 360;\n            })\n        } else {\n            _setRoomYRotation(pv => {\n                roomYRotationRef.current = obj;\n                return obj % 360;\n            })\n        }\n    }\n\n    // helper functions: interactions\n    const keysPressed = useRef([]);\n    const addKey = (name) => keysPressed.current = Array.from(new Set([...keysPressed.current, name]));\n    const removeKey = (name) => {\n        let keySet = new Set(keysPressed.current);\n        keySet.delete(name);\n        keysPressed.current = Array.from(keySet);\n    }\n\n    // helper functions: speed\n    function speed(currentVal, posOrNeg) {\n        return maxSpeed * posOrNeg;\n        // the two equations this first line combines are\n        //   acceleration + currentVal >= maxSpeed --> then just return maxSpeed\n        //   -acceleration + currentVal <= -maxSpeed --> then just return -maxSpeed\n        if (posOrNeg * currentVal + acceleration >= posOrNeg * maxSpeed) return posOrNeg * maxSpeed;\n        else return currentVal + posOrNeg * acceleration;\n    }\n\n    const speedValue = useRef(0);\n\n    // helper functions: server update + on interaction code\n    const keyFuncs = code => {\n        switch (code) {\n            case \"ArrowRight\":\n                setDr(pv => pv + 1);\n                break;\n            case \"ArrowLeft\":\n                setDr(pv => pv - 1);\n                break;\n            case \"KeyW\":\n                setPosX(pv => pv + Math.cos(rad(roomYRotationRef.current)) * maxSpeed);\n                setPosZ(pv => pv + Math.sin(rad(roomYRotationRef.current)) * maxSpeed)\n                break;\n            case \"KeyS\":\n                setPosX(pv => pv + Math.cos(rad(roomYRotationRef.current + 180)) * maxSpeed);\n                setPosZ(pv => pv + Math.sin(rad(roomYRotationRef.current + 180)) * maxSpeed)\n                break;\n            case \"KeyD\":\n                setPosX(pv => pv + Math.cos(rad(roomYRotationRef.current + 90)) * maxSpeed);\n                setPosZ(pv => pv + Math.sin(rad(roomYRotationRef.current + 90)) * maxSpeed)\n                break;\n            case \"KeyA\":\n                setPosX(pv => pv + Math.cos(rad(roomYRotationRef.current - 90)) * maxSpeed);\n                setPosZ(pv => pv + Math.sin(rad(roomYRotationRef.current - 90)) * maxSpeed)\n                break;\n            case \"Space\":\n                setOffset(-(window.innerWidth) / 2)\n                setPosZ(offset + 1196 / 2);\n                setPosX(0);\n                setRoomYRotation(0);\n                setDr(0);\n                break;\n            default:\n                console.log(code);\n                break;\n        }\n    }\n    const update = useCallback(() => {\n        let keys = keysPressed.current;\n        keys.forEach(code => keyFuncs(code));\n    }, [keyFuncs])\n    useEffect(() => {\n        document.addEventListener(\"keydown\", ev => {\n            addKey(ev.code);\n        });\n        document.addEventListener(\"keyup\", ev => {\n            removeKey(ev.code)\n        })\n        document.body.addEventListener(\"click\", document.body.requestPointerLock || document.body.mozRequestPointerLock);\n\n        document.addEventListener(\"mousemove\", updateRotation, false);\n\n        function updateRotation(ev) {\n            if (document.pointerLockElement ||\n                document.mozPointerLockElement) {\n                setRoomYRotation(pv => pv + ev.movementX * turnSpeed)\n            }\n        }\n\n        setInterval(update, 50)\n    }, [])\n\n    return (\n        <>\n            <Chat ws={ws} chats={chats}/>\n            {state.data.king && <Controls ws={ws} videoRef={videoRef} updateWS={updateWS}/>}\n            <section id=\"container\">\n                <div id=\"room\" style={{\n                    transform: `rotateY(${roomYRotation}deg)`\n                }}>\n                    {face({\n                        orientation: 'N', dy,\n                        dz: posZ,\n                        dx: posX,\n                        styles: {backgroundColor: 'rgba(0,0,0,0.3)'},\n                        inside: <video\n                            ref={videoRef}\n                            src={videoSrc}\n                            style={{width: '100%', height: '100%'}}\n                            autoPlay={true}/>\n                    })}\n                    {/*{box({posX, posZ, dy, size: 50, y: -25})}*/}\n                    <RenderAvatars sid={sid} avatars={avatars} posX={posX} posZ={posZ} dy={dy}\n                                   key={JSON.stringify(avatars)}/>\n                    {/*{debugFaces({posX, posZ, dy})}*/}\n                </div>\n            </section>\n\n            <pre style={{display: 'none', color: 'white', position: 'fixed', top: 0, backgroundColor: 'black'}}>\n               rot: {roomYRotation}deg <br/>\n               dx: {posX}px dz: {posZ}px <br/>\n               dr: {dr}deg offset: {offset}px <br/>\n               sid: {sid} <br/>\n               val: {value}\n           </pre>\n        </>\n    );\n\n}\n\n/**\n * Creates a face [3D Wall]\n *\n * @param width\n * @param height\n * @param styles\n * @param inside\n * @param orientation\n * @param dz\n * @param dx\n * @param dy\n * @param dr\n * @returns {JSX.Element}\n */\nfunction face({\n    width = 1196, height = 596, styles = {}, inside, orientation, dz, dx, dy, dr = 0\n}\n)\n{\n    let transform = {\n        N: `rotateY(${dr}deg) translateZ(${dx}px) translateX(${-dz}px) translateY(${dy}px)`,\n        E: `rotateY(${-90 + dr}deg) translateZ(${dz}px) translateX(${dx}px) translateY(${dy}px)`,\n        W: `rotateY(${90 + dr}deg) translateZ(${dz}px) translateX(${dx}px) translateY(${dy}px)`,\n        S: `rotateY(${180 + dr}deg) translateZ(${dx}px) translateX(${dz}px) translateY(${dy}px)`,\n        T: `rotateX(90deg) translateZ(${dy}px) translateX(${-dz}px) translateY(${dx}px)`,\n        B: `rotateX(90deg) translateZ(-${dy}px) translateX(${-dz}px) translateY(${dx}px)`,\n    }\n    let extraStyles = ['T', 'B'].includes(orientation) ? {\n        // width: 1196,\n        // height: 1196,\n        // top: -300,\n    } : {fontSize: height * .9}\n    return <figure style={{\n        width,\n        height,\n        transform: transform[orientation],\n        ...extraStyles,\n        ...styles,\n    }}>\n        {\n            inside || orientation\n        }\n    </figure>\n}\n\nfunction debugFaces(\n{\n    posX, posZ, dy\n}\n)\n{\n    let size = 50;\n    return <>{face({\n        orientation: 'N',\n        dz: 0,\n        dx: 0,\n        dy: dy,\n        styles: {backgroundColor: 'yellow'},\n        width: size,\n        height: size,\n        inside: 'X'\n    })}\n        {face({\n            orientation: 'E',\n            dz: 0,\n            dx: 0,\n            dy: dy,\n            styles: {backgroundColor: 'yellow'},\n            width: size,\n            height: size,\n            inside: 'Z'\n        })}\n        {face({\n            orientation: 'N',\n            dz: posZ,\n            dx: posX,\n            dy: dy,\n            styles: {backgroundColor: 'green'},\n            width: size,\n            height: size,\n            inside: 'X'\n        })}\n        {face({\n            orientation: 'E',\n            dz: posZ,\n            dx: posX,\n            dy: dy,\n            styles: {backgroundColor: 'green'},\n            width: size,\n            height: size,\n            inside: 'Z'\n        })}\n    </>\n}\n\nfunction box(\n{\n    posX, posZ, dy, x = 200, y = 0, z = -300, size = 100\n}\n)\n{\n    return <>\n        {face({\n            orientation: 'N',\n            dz: posZ + z,\n            dx: posX + x,\n            dy: dy + 596 + y - size,\n            styles: {backgroundColor: 'red'},\n            width: size,\n            height: size,\n            inside: 'a'\n        })}\n        {face({\n            orientation: 'E',\n            dz: posZ + z - size / 2,\n            dx: posX + x - size / 2,\n            dy: dy + 596 + y - size,\n            styles: {backgroundColor: 'green'},\n            width: size,\n            height: size,\n            inside: 'a'\n        })}\n        {face({\n            orientation: 'E',\n            dz: posZ + z + size / 2,\n            dx: posX + x - size / 2,\n            dy: dy + 596 + y - size,\n            styles: {backgroundColor: 'blue'},\n            width: size,\n            height: size,\n            inside: 'a'\n        })}\n        {face({\n            orientation: 'N',\n            dz: posZ + z,\n            dx: posX + x - size,\n            dy: dy + 596 + y - size,\n            styles: {backgroundColor: 'pink'},\n            width: size,\n            height: size,\n            inside: 'a'\n        })}\n    </>\n}\n\nfunction rotatePlane(\n{\n    x, z, r\n}\n)\n{\n    // math here https://www.geogebra.org/geometry/yxzwugkv\n    let deg = rad(r);\n    let coordX = Math.abs(x) * Math.cos(deg) + Math.abs(z) * Math.sin(deg);\n    let coordZ = Math.abs(x) * Math.sin(deg) - Math.abs(z) * Math.cos(deg);\n    let dist = Math.sqrt(Math.pow(x - coordX, 2) + Math.pow(z - coordZ, 2));\n    let angleEAA = (Math.atan(Math.abs(x / z)) * 180 / Math.PI) + 90 - r / 2;\n    return [dist * Math.sin(rad(angleEAA)), dist * Math.cos(rad(angleEAA))];\n}\n\nfunction avatar(\n{\n    color = 'darkblue', posX, posZ, dy, x = 200, y = 0, z = -300, size = 51, dr = 0, sid\n}\n)\n{\n    // let [mvX, mvZ] = rotatePlane({x: posX + x, z: posZ + z, r: dr});\n    let dz = (posZ + z)// - mvZ// + mvX;\n    let dx = (posX + x)// + mvX// + mvZ;\n    let avatarStyles = {\n        margin: 0\n    }\n    return <>\n        {face({\n            orientation: 'N',\n            dz,\n            dx,\n            dy: dy + 596 + y - size,\n            dr,\n            styles: {backgroundColor: color, fontSize: 5},\n            width: size,\n            height: size,\n            inside: <img style={avatarStyles} src={'img/' + color + '2.png'} alt=\"\"/>\n        })}\n        {face({\n            orientation: 'E',\n            dz: posZ + z - (5 / 6) * size,\n            dx: posX + x - size / 6,\n            dy: dy + 596 + y - size,\n            styles: {backgroundColor: color, fontSize: 10},\n            width: size / 3,\n            height: size,\n            inside: <img style={avatarStyles} src={'img/' + color + '3.png'} alt=\"\"/>\n        })}\n        {face({\n            orientation: 'E',\n            dz: posZ + z + size / 6,\n            dx: posX + x - size / 6,\n            dy: dy + 596 + y - size,\n            styles: {backgroundColor: color, fontSize: 10},\n            width: size / 3,\n            height: size,\n            inside: <img style={avatarStyles} src={'img/' + color + '3.png'} alt=\"\"/>\n        })}\n        {face({\n            orientation: 'N',\n            dz: posZ + z,\n            dx: posX + x - size / 3,\n            dy: dy + 596 + y - size,\n            styles: {backgroundColor: color},\n            width: size,\n            height: size,\n            inside: <img style={avatarStyles} src={'img/' + color + '1.png'} alt=\"\"/>\n        })}\n    </>\n}\n\nfunction RenderAvatars(\n{\n    sid, avatars, posX, posZ, dy\n}\n)\n{\n    return Object.keys(avatars).map(a => {\n        let av = avatars[a];\n        if (a !== sid)\n            return avatar({\n                color: av.color,\n                posX,\n                posZ,\n                dy,\n                size: 51,\n                y: -225,\n                x: -av.posX + 600,\n                z: -av.posZ - 1196 / 2 + 25,\n                dr: 0,\n                sid: a\n            })\n\n    })\n}\n","import React, {useState, useEffect, useRef, useCallback} from \"react\";\n\nimport \"./landingpage.sass\";\n\n/**\n * Helper animate function\n * @param func\n * @param interval\n * @param from\n * @param to\n * @param step\n * @returns {Promise<number>}\n */\nexport function animate({func, interval = 50, from = 1, to = 0, step = 0.17}) {\n    const sleep = n => new Promise(r => setTimeout(r, n));\n    return new Promise(async resolve => {\n        let val = from;\n        while (val > to) {\n            val -= step;\n            func(val);\n            await sleep(interval);\n        }\n        resolve(val);\n    })\n}\n\nexport default function LandingPage({setState, loading}) {\n    const [animating, setAnimating] = useState(1);\n    return <div className=\"centerbox-container\" style={{opacity: animating}}>\n        <div className=\"centerbox\">\n            <h1>cine.stream</h1>\n            <h2>watch together. in 3D. online.</h2>\n            <p>No more \"3..2..1..Start!\" <br/>Join a <i>cinestream</i> to watch closely, virtually.</p>\n            <button\n                disabled={loading}\n                onClick={() => {\n                    animate({func: setAnimating}).then(() =>\n                        setState({\n                            page: 'login',\n                            data: {newRoom: true}\n                        })\n                    )\n                }}\n            >Create a room\n            </button>\n            <br/>\n            <button\n                className={'small'}\n                disabled={true}\n                onClick={() => {\n                    animate({func: setAnimating}).then(() =>\n                        setState({\n                            page: 'rooms',\n                            data: {}\n                        })\n                    )\n                }}\n            >Find a public room\n            </button>\n        </div>\n        <div className=\"copyright\">Created in &lt;24 hours by Samyok and Sampada Nepal</div>\n    </div>\n}","import React, {useState, useEffect, useRef, useCallback} from \"react\";\nimport {AvatarGenerator} from 'random-avatar-generator';\nimport {animate} from \"./LandingPage\";\nimport './landingpage.sass'\n\nconst generator = new AvatarGenerator();\n\nexport default function Login({ws, roomID, setState}) {\n\n    const [animating, setAnimating] = useState(1);\n    const [avatar, setAvatar] = useState({\n        random: false,\n        src: null\n    })\n    const [username, setUsername] = useState(null)\n\n\n    let avatarImageSRC = avatar.src ||\n        (avatar.random ? generator.generateRandomAvatar() : generator.generateRandomAvatar(username?.trim()));\n\n    return <div className=\"centerbox-container\" style={{opacity: animating}}>\n        <div className=\"centerbox\">\n            <h1>{roomID ? 'join' : 'create'} a cinespace</h1>\n\n            <input type=\"text\" placeholder={'your username'} required value={username} onChange={(ev) => {\n                setUsername(ev.currentTarget.value)\n            }}/>\n            <button onClick={() => {\n                if (username?.trim().length > 1) {\n                    ws.emit('auth', {\n                        username,\n                        avatar: avatarImageSRC,\n                        newRoom: !roomID,\n                        roomID\n                    })\n                    setState({\n                        page: 'world',\n                        data: {newRoom: true, king: true}\n                    })\n                }\n            }}>{roomID ? 'Join' : 'Create'}\n            </button>\n        </div>\n    </div>\n}","import React, {useState, useEffect, useRef, useCallback} from \"react\";\nimport {io} from \"socket.io-client\";\nimport \"./room.css\";\n\nimport World from './World';\nimport LandingPage from \"./LandingPage\";\nimport Login from \"./Login\";\n\nfunction App() {\n    const ws = useRef({});\n    const [connectedWS, setConnectedWS] = useState(false);\n    const [sid, setSID] = useState(null);\n    const [roomID, setRoomID] = useState(window.location.pathname.substring(1));\n    const [state, setState] = useState({\n        page: roomID ? 'login' : 'landing',\n        data: null\n    })\n    // const debugLanding = true;\n    useEffect(() => {\n        if (connectedWS) return;\n        fetch('/ws').then(r => r.json()).then(r => {\n            ws.current = io(r.endpoint);\n            console.log('connected to ws');\n            setConnectedWS(true);\n            ws.current.on('auth', () => {\n                console.log(ws.current.id);\n                setSID(ws.current.id);\n            })\n            ws.current.on('room', (data) => {\n                window.history.pushState(null, null, data)\n                setRoomID(data)\n            })\n            ws.current.on('closedroom', () => window.location.href = '/');\n        })\n    }, [connectedWS])\n    return <>\n        {state.page === 'landing' && <LandingPage setState={setState} loading={!connectedWS}/>}\n        {state.page === 'login' && <Login roomID={roomID} ws={ws.current} setState={setState}/>}\n        {state.page === 'world' && <World roomID={roomID} sid={sid} ws={ws.current} state={state}/>}\n    </>\n}\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}